<!-- Generated by SpecStory -->

# How is the status determined? (2025-09-13 23:50Z)

_**User (2025-09-13 12:50Z)**_

i don't understand, how does the status get decided?

---

_**Assistant**_

I can see you're looking at the `parse_specstory.py` file and specifically the status mapping logic. Let me read the full context around this code to understand how the status gets decided.

---

Read file: undefined

---

Now I can see the full picture! The status is determined by parsing markdown-style todo list items. Let me explain how it works:

## How the Status Gets Decided

The status is determined by parsing **markdown-style checkbox syntax** in todo lists. Here's the breakdown:

1. **Pattern Matching**: The code looks for todo items that follow this pattern:
   ```
   - [x] Completed task
   - [-] In progress task  
   - [ ] Pending task
   ```

2. **Status Character Extraction**: 
   - Line 157: `item_pattern = r"-\s*\[([ x-])\]\s*(.+?)(?=\n-|\Z)"`
   - This regex captures the character inside the square brackets `[ ]`
   - Line 161: `status_char = item_match.group(1)` extracts that character

3. **Status Mapping** (lines 165-166):
   ```python
   status_map = {"x": "completed", "-": "in_progress", " ": "pending"}
   status = status_map.get(status_char, "pending")
   ```

So the status is decided based on what character appears inside the square brackets:
- `[x]` ‚Üí `"completed"` 
- `[-]` ‚Üí `"in_progress"`
- `[ ]` (space) ‚Üí `"pending"`
- Any other character ‚Üí defaults to `"pending"`

The script is essentially parsing markdown todo lists from what appears to be documentation files (likely `.md` files based on the context) and converting the checkbox states into structured status information.

---

_**User (2025-09-13 12:50Z)**_

how do we know the task status? how come you know? give me an example

---

_**Assistant**_

Great question! Let me show you exactly how we know the task status by looking at the actual source data that gets parsed. The parser reads from `.md` files and extracts the checkbox states. Let me find an example:

---

Read file: undefined

---

Let me search for a Todo List section in this file:

---



---

Perfect! Now let me also show you the corresponding parsed JSON to see how this gets converted:

---

Read file: undefined

---

Perfect! Now I can show you exactly how the status gets determined with real examples:

## How We Know the Task Status - Real Examples

The status comes from parsing **markdown checkbox syntax** in the original `.md` files. Here's how it works:

### 1. **Source Data (Original Markdown)**
From the `.md` file, we can see todo lists like this:
```markdown
## Todo List

- [-] Install p5 and types in project
- [ ] Create P5Sketch component with instance-mode sketch and Wall class  
- [ ] Render P5Sketch from App.tsx
- [ ] Run build and fix any type errors
```

### 2. **Status Character Mapping**
The parser looks at the character inside the brackets:
- `[x]` ‚Üí **"completed"** ‚úÖ
- `[-]` ‚Üí **"in_progress"** üîÑ  
- `[ ]` ‚Üí **"pending"** ‚è≥

### 3. **Parsed Result (JSON)**
This gets converted to the structured JSON you see:
```json
{
  "task": "Install p5 and types in project",
  "status": "in_progress"
},
{
  "task": "Create P5Sketch component with instance-mode sketch and Wall class", 
  "status": "pending"
}
```

### 4. **Status Evolution Over Time**
As work progresses, the same tasks get updated in later todo lists:
```markdown
## Todo List

- [x] Install p5 and types in project           ‚Üê Changed from [-] to [x]
- [x] Create P5Sketch component with instance-mode sketch and Wall class
- [x] Render P5Sketch from App.tsx  
- [-] Run build and fix any type errors         ‚Üê Now in progress
```

So the status is determined by **manually written markdown checkboxes** that track progress through a development session. The `[-]` syntax appears to be a custom convention for "in progress" tasks (not standard markdown, but parsed by this tool).

---

